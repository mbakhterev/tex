\usepackage{listings}
\usepackage{makecell}
\usepackage{xcolor}
\usepackage{adjustbox}

\usepackage[normalem]{ulem} 

\lstset{
  basicstyle=\ttfamily,
  numberstyle=\ttfamily,
  literate={-{}}{-{}}1 {\$}{\$}1,
  mathescape=true,
  escapechar=ยง,
  extendedchars=true}

\lstdefinestyle{marks}{
  moredelim=**[is][\color{red}]{@}{@},
  moredelim=**[is][\color{blue}]{`}{`},
  moredelim=**[is][\color{gray}]{\\}{\\}}

\lstdefinestyle{cmarks}{
  moredelim=**[is][\color{red}]{@}{@},
  moredelim=**[is][\color{blue}]{`}{`}}

\lstdefinestyle{rthree}{
  moredelim=**[is][\color{red}]{`}{`},
  literate={L}{\texttt{\textcolor{gray}{\grk{l}}}}1,
  keywordstyle={\color{gray}},
  keywords={ext,run,bind,cell,WRef,WTree,Flow,Int,tree,rec,or,span},
  otherkeywords={->,!}
}

\lstdefinestyle{rfour}{
  moredelim=**[is][\color{blue}]{@}{@},
  moredelim=**[is][\color{red}]{`}{`},
  literate={L}{\texttt{\textcolor{gray}{\grk{l}}}}1,
  keywordstyle={\color{gray}},
  keywords={run,pin,rec,tree,enum,span,define,if,get,path,let,flow,zip}
}

\newenvironment{clist}{\begin{center}\begin{mcellbox}}{\end{mcellbox}\end{center}}

\newenvironment{alist}{\begin{center}\begin{adjustbox}{width=\linewidth}\begin{mcellbox}}%
                      {\end{mcellbox}\end{adjustbox}\end{center}}
